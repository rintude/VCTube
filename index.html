<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>VCTube</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial;
  background:#0b141a;
  color:#fff;
}
header{
  text-align:center;
  padding:12px;
  font-size:20px;
  background:#111b21;
}
.container{
  padding:10px;
}
video{
  width:100%;
  max-height:240px;
  background:#000;
  border-radius:8px;
  object-fit:cover;
  transform:scaleX(-1);
}
textarea,button{
  width:100%;
  margin-top:8px;
  padding:10px;
  border-radius:6px;
  border:none;
}
button{
  background:#25d366;
  font-weight:bold;
  cursor:pointer;
}
textarea{
  height:90px;
}
</style>
</head>

<body>

<header>VCTube â€” Pure WebRTC</header>

<div class="container">

<video id="localVideo" autoplay muted playsinline></video>
<video id="remoteVideo" autoplay playsinline></video>

<button onclick="createCall()">Create Call</button>
<textarea id="offer" placeholder="Offer will appear here"></textarea>

<button onclick="joinCall()">Join Call</button>
<textarea id="answer" placeholder="Paste Answer here"></textarea>

<button onclick="acceptAnswer()">Accept Answer</button>

</div>

<script>
let pc;
let localStream;

const servers = {
  iceServers: [
    { urls: "stun:stun.l.google.com:19302" }
  ]
};

async function init() {
  localStream = await navigator.mediaDevices.getUserMedia({
    video: true,
    audio: true
  });

  localVideo.srcObject = localStream;

  pc = new RTCPeerConnection(servers);

  localStream.getTracks().forEach(t => pc.addTrack(t, localStream));

  pc.ontrack = e => {
    remoteVideo.srcObject = e.streams[0];
    remoteVideo.play().catch(()=>{});
  };
}

async function createCall() {
  await init();

  const offerDesc = await pc.createOffer();
  await pc.setLocalDescription(offerDesc);

  offer.value = JSON.stringify(offerDesc);
}

async function joinCall() {
  await init();

  const offerDesc = JSON.parse(offer.value);
  await pc.setRemoteDescription(offerDesc);

  const answerDesc = await pc.createAnswer();
  await pc.setLocalDescription(answerDesc);

  answer.value = JSON.stringify(answerDesc);
}

async function acceptAnswer() {
  const answerDesc = JSON.parse(answer.value);
  await pc.setRemoteDescription(answerDesc);
}
</script>

</body>
</html>
